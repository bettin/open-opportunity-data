<h2>Data Inventory</h2>
<p>Data related to the topic of opportunity.</p>

<div class="usa-accordion">
  <ul class="usa-unstyled-list">

    {% capture sort_strings %}
      {% for p in site.data.data-providers %}
        {{ p[1].name | slugify }}__{{ p[0] }}
      {% endfor %}
    {% endcapture %}
    {% assign sort_strings = sort_strings | split:' ' | sort %}
    {% for sort_string in sort_strings %}
    {% assign sort_string_pair = sort_string | split:'__' %}
    {% assign id = sort_string_pair[1] %}
    {% assign provider = site.data.data-providers[id] %}
    {% assign control_id = "collapsible-provider-" | append:forloop.index %}
    <li>
      <section>
        <button class="usa-button-unstyled" aria-expanded="true"
                aria-controls="{{control_id}}">
          {{ provider.name }}
        </button>

        <div id="{{control_id}}" aria-hidden="false"
             class="usa-accordion-content">
          <table>
            <thead>
              <tr>
                <th scope="col">Topic</th>
                <th scope="col">Description</th>
                <th scope="col">URL</th>
              </tr>
            </thead>
            <tbody>
              {% for dataset in provider.datasets %}
              <tr>
                <td scope="row">{{ dataset.topic }}</td>
                <td>{{ dataset.description }}</td>
                <td><a href="{{ dataset.url }}">{{ dataset.url }}</a></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

      </section>
    </li>
    {% endfor %}

  </ul>
</div>
